<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>โปรแกรมรวมตัวเลข</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 15px;
            box-sizing: border-box;
            background-color: #f0f0f0;
        }

        #date-container {
            text-align: center;
            margin-bottom: 20px;
        }

        #current-date {
            font-size: 1.5em; /* ปรับขนาดให้พอดีกับมือถือ */
            font-weight: bold;
            color: #4CAF50;
        }

        h1, h3 {
            text-align: center;
            color: #333;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .input-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #fff;
            padding: 8px 12px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }

        .input-group label {
            width: 50px;
            font-weight: bold;
            color: #555;
        }

        .input-group input[type="number"] {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            text-align: right;
            -moz-appearance: textfield; /* ซ่อนปุ่มขึ้น/ลงใน Firefox */
        }

        /* ซ่อนปุ่มขึ้น/ลงใน Chrome, Safari, Edge */
        .input-group input[type="number"]::-webkit-outer-spin-button,
        .input-group input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .subtotal-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 1.1em;
            padding: 10px;
            background-color: #e9e9e9;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .buttons-container {
            text-align: center;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        button {
            padding: 12px 20px;
            font-size: 1em;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        #calculate-btn {
            background-color: #007BFF;
        }

        #calculate-btn:hover {
            background-color: #0056b3;
        }

        #reset-btn {
            background-color: #dc3545; /* สีแดง */
        }

        #reset-btn:hover {
            background-color: #c82333; /* สีแดงเข้มขึ้นเมื่อเอาเมาส์ไปวาง */
        }

        .results-section {
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .results-section p {
            font-size: 1.1em;
            margin: 10px 0;
        }

        .results-section hr {
            border: 0;
            height: 1px;
            background: #ddd;
            margin: 15px 0;
        }

        .box-calculation label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .box-calculation input {
            width: calc(100% - 20px);
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }

        /* โค้ดที่เพิ่มเข้ามาเพื่อจัดการแสดงผลบนมือถือ */
        .grid-container {
            display: flex;
            flex-direction: column; /* จัดเรียงองค์ประกอบในแนวตั้ง */
        }

        .grid-container .column-1,
        .grid-container .column-2,
        .grid-container .column-3,
        .grid-container .column-4,
        .grid-container .column-5,
        .grid-container .column-6,
        .grid-container .column-7,
        .grid-container .column-8,
        .grid-container .column-9 {
            display: flex;
            flex-direction: column;
        }

        /* Responsive grid for larger screens (optional, but good practice) */
        @media (min-width: 601px) {
            .grid-container {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div id="date-container">
        <p>วันที่ปัจจุบัน: <span id="current-date"></span></p>
    </div>

    <h1>โปรแกรมรวมตัวเลข</h1>

    <div class="container">
        <div class="grid-container">
            <div class="column-1">
                <div class="input-group"><label>1</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>2</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>3</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>4</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>5</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>6</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>7</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>8</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>9</label><input type="number" class="number-input group-1"></div>
                <div class="input-group"><label>10</label><input type="number" class="number-input group-1"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-1">0</span></div>
            </div>
            <div class="column-2">
                <div class="input-group"><label>11</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>12</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>13</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>14</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>15</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>16</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>17</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>18</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>19</label><input type="number" class="number-input group-2"></div>
                <div class="input-group"><label>20</label><input type="number" class="number-input group-2"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-2">0</span></div>
            </div>
            <div class="column-3">
                <div class="input-group"><label>21</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>22</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>23</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>24</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>25</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>26</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>27</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>28</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>29</label><input type="number" class="number-input group-3"></div>
                <div class="input-group"><label>30</label><input type="number" class="number-input group-3"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-3">0</span></div>
            </div>
             <div class="column-4">
                <div class="input-group"><label>31</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>32</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>33</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>34</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>35</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>36</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>37</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>38</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>39</label><input type="number" class="number-input group-4"></div>
                <div class="input-group"><label>40</label><input type="number" class="number-input group-4"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-4">0</span></div>
            </div>
            <div class="column-5">
                <div class="input-group"><label>41</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>42</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>43</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>44</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>45</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>46</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>47</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>48</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>49</label><input type="number" class="number-input group-5"></div>
                <div class="input-group"><label>50</label><input type="number" class="number-input group-5"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-5">0</span></div>
            </div>
            <div class="column-6">
                <div class="input-group"><label>51</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>52</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>53</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>54</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>55</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>56</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>57</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>58</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>59</label><input type="number" class="number-input group-6"></div>
                <div class="input-group"><label>60</label><input type="number" class="number-input group-6"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-6">0</span></div>
            </div>
            <div class="column-7">
                <div class="input-group"><label>61</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>62</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>63</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>64</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>65</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>66</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>67</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>68</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>69</label><input type="number" class="number-input group-7"></div>
                <div class="input-group"><label>70</label><input type="number" class="number-input group-7"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-7">0</span></div>
            </div>
            <div class="column-8">
                <div class="input-group"><label>71</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>72</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>73</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>74</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>75</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>76</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>77</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>78</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>79</label><input type="number" class="number-input group-8"></div>
                <div class="input-group"><label>80</label><input type="number" class="number-input group-8"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-8">0</span></div>
            </div>
            <div class="column-9">
                <div class="input-group"><label>81</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>82</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>83</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>84</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>85</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>86</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>87</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>88</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>89</label><input type="number" class="number-input group-9"></div>
                <div class="input-group"><label>90</label><input type="number" class="number-input group-9"></div>
                <div class="subtotal-row"><span>รวมย่อย</span><span id="subtotal-9">0</span></div>
            </div>
        </div>

        <div class="buttons-container">
            <button id="calculate-btn" onclick="updateTotals()">คำนวณผลรวม</button>
            <button id="reset-btn" onclick="resetAll()">รีเซ็ตทั้งหมด</button>
        </div>

        <div class="results-section">
            <p>ผลรวมทั้งหมด: <span id="total-all-cell">0</span></p>
            <p>จำนวนเงิน = (<span id="grand-total-display-3-3">0</span> x 3.3) = <span id="final-amount-3-3">0</span></p>

            <hr>
            <h3>คำนวณจำนวนกล่อง</h3>
            <div class="box-calculation">
                <label for="box-count-input">จำนวนกล่อง:</label>
                <input type="number" id="box-count-input" value="0" oninput="updateBoxCalculation()">
            </div>
            <p>จำนวนเงิน= (<span id="box-count-display">0</span> x 46) = <span id="final-amount-46">0</span></p>

            <hr>
            <h3>รวมทั้งสิ้น</h3>
            <p>รวมทั้งสิ้น = <span id="final-amount-3-3-sum">0</span> + <span id="final-amount-46-sum">0</span> = <span id="grand-total-sum">0</span></p>
        </div>
    </div>

    <script>
      function displayCurrentDate() {
        var date = new Date();
        var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById("current-date").textContent = date.toLocaleDateString('th-TH', options);
      }

      function calculateSubtotal(groupClass, totalId) {
        var inputs = document.getElementsByClassName(groupClass);
        var subtotal = 0;
        for (var i = 0; i < inputs.length; i++) {
          var value = parseFloat(inputs[i].value) || 0;
          subtotal += value;
        }
        document.getElementById(totalId).textContent = subtotal;
      }

      function calculateGrandTotal() {
        var allInputs = document.getElementsByClassName("number-input");
        var grandTotal = 0;
        for (var i = 0; i < allInputs.length; i++) {
          var value = parseFloat(allInputs[i].value) || 0;
          grandTotal += value;
        }
        document.getElementById("total-all-cell").textContent = grandTotal;
        document.getElementById("grand-total-display-3-3").textContent = grandTotal;
        return grandTotal;
      }

      function calculateFromGrandTotal(grandTotal) {
        var finalAmount33 = grandTotal * 3.3;
        document.getElementById("final-amount-3-3").textContent = finalAmount33.toFixed(2);
        document.getElementById("final-amount-3-3-sum").textContent = finalAmount33.toFixed(2);
        return finalAmount33;
      }

      function updateBoxCalculation() {
        var boxCountInput = document.getElementById("box-count-input");
        var boxCount = parseFloat(boxCountInput.value) || 0;

        var finalAmount46 = boxCount * 46;
        document.getElementById("box-count-display").textContent = boxCount;
        document.getElementById("final-amount-46").textContent = finalAmount46.toFixed(2);

        document.getElementById("final-amount-46-sum").textContent = finalAmount46.toFixed(2);

        updateFinalSum();
      }

      function updateFinalSum() {
        var finalAmount33 = parseFloat(document.getElementById("final-amount-3-3").textContent) || 0;
        var finalAmount46 = parseFloat(document.getElementById("final-amount-46").textContent) || 0;
        var grandTotalSum = finalAmount33 + finalAmount46;
        document.getElementById("grand-total-sum").textContent = grandTotalSum.toFixed(2);
      }

      function updateTotals() {
        calculateSubtotal('group-1', 'subtotal-1');
        calculateSubtotal('group-2', 'subtotal-2');
        calculateSubtotal('group-3', 'subtotal-3');
        calculateSubtotal('group-4', 'subtotal-4');
        calculateSubtotal('group-5', 'subtotal-5');
        calculateSubtotal('group-6', 'subtotal-6');
        calculateSubtotal('group-7', 'subtotal-7');
        calculateSubtotal('group-8', 'subtotal-8');
        calculateSubtotal('group-9', 'subtotal-9');

        var grandTotal = calculateGrandTotal();

        calculateFromGrandTotal(grandTotal);

        updateBoxCalculation();
      }

      function resetAll() {
        var inputs = document.querySelectorAll("input[type='number']");
        inputs.forEach(function(input) {
          input.value = "";
        });
        document.getElementById("box-count-input").value = "0";
        updateTotals();
      }

      // โค้ดสำหรับเลื่อนเคอร์เซอร์เมื่อกด Enter
      var inputs = document.querySelectorAll("input.number-input");

      // อ้างอิงถึง input ทั้งหมดที่เรียงตามลำดับใน HTML
      var allInputs = Array.from(document.querySelectorAll('.input-group input'));

      allInputs.forEach(function(input, index) {
          input.addEventListener("keydown", function(event) {
              if (event.key === "Enter" || event.keyCode === 13) {
                  event.preventDefault();
                  // หาช่องถัดไปตามลำดับในอาร์เรย์
                  var nextIndex = index + 1;
                  // ถ้ามีช่องถัดไป ให้ focus
                  if (nextIndex < allInputs.length) {
                      allInputs[nextIndex].focus();
                  } else {
                      // ถ้าถึงช่องสุดท้าย ให้วนกลับไปช่องแรก
                      allInputs[0].focus();
                  }
              }
          });
      });

      window.onload = displayCurrentDate;
    </script>
</body>
</html>
